<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select id="pref"></select>
    <p class="log"></p>
    <script>
      // 행정표준코드에 따른 지역별 코드 배열
      const PREF_LIST = [
        { value: 1100, name: "서울" },
        { value: 3611, name: "세종" },
        { value: 2600, name: "부산" },
        { value: 2700, name: "대구" },
        { value: 2800, name: "인천" },
        { value: 2900, name: "광주" },
        { value: 3000, name: "대전" },
        { value: 3100, name: "울산" },
        { value: 5011, name: "제주" },
        { value: 5013, name: "서귀포" },
        { value: 4111, name: "수원" },
        { value: 4128, name: "고양" },
        { value: 4113, name: "성남" },
        { value: 4146, name: "용인" },
        { value: 4119, name: "부천" },
        { value: 4127, name: "안산" },
        { value: 4122, name: "평택" },
        { value: 4115, name: "의정부" },
        { value: 4157, name: "김포" },
        { value: 4121, name: "광명" },
        { value: 4145, name: "하남" },
        { value: 4129, name: "과천" },
        { value: 4211, name: "춘천" },
        { value: 4213, name: "원주" },
        { value: 4215, name: "강릉" },
        { value: 4221, name: "속초" },
        { value: 4313, name: "충주" },
        { value: 4420, name: "아산" },
        { value: 4511, name: "전주" },
        { value: 4513, name: "군산" },
        { value: 4519, name: "남원" },
        { value: 4611, name: "목포" },
        { value: 4613, name: "여수" },
        { value: 4615, name: "순천" },
        { value: 4623, name: "광양" },
        { value: 4711, name: "포항" },
        { value: 4713, name: "경주" },
        { value: 4715, name: "김천" },
        { value: 4717, name: "안동" },
        { value: 4719, name: "구미" },
        { value: 4725, name: "상주" },
        { value: 4812, name: "창원" },
        { value: 4817, name: "진주" },
        { value: 4822, name: "통영" },
        { value: 4824, name: "사천" },
        { value: 4825, name: "김해" },
        { value: 4831, name: "거제" },
      ];

      //select
      const el = document.querySelector("#pref");
      /* 동적요소생성
        1.빈 변수 생성 (기본값)
        2. 1번에서 생성한 변수에 배열(반복문)의 원소를 추가할당 a+=b
        3. 상위요소를 선택하여 2번을 추가
      */
      //option
      let optStr = '<option value="선택하세요">선택하세요</option>';
      PREF_LIST.forEach((e) => {
        // LIST의 요소를 매개변수로 갖고옴.
        optStr += `<option value="${e.value}">${e.name}</option>`;
        el.innerHTML = optStr;
        //변경시 이벤트
        el.addEventListener("change", function (e) {
          const val = e.target.value;
          let filtered = PREF_LIST.filter((e, i) => {
            if (e.value == val) {
              return true;
            }
          });
          console.log(filtered);

          document.querySelector(
            ".log"
          ).innerHTML = `선택하신 ${filtered[0].name}지역의 코드는 ${val}입니다`;
        });
      });
    </script>
  </body>
</html>
